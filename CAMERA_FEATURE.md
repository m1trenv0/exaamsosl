# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –≤ —á–∞—Ç

## üì∏ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å –∫–∞–º–µ—Ä—ã –∫–ª–∏–µ–Ω—Ç–∞ –∞–¥–º–∏–Ω—É —á–µ—Ä–µ–∑ —á–∞—Ç.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

‚úÖ **–ó–∞—Ö–≤–∞—Ç —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã** - –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫ –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞  
‚úÖ **Preview –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ  
‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ base64** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Supabase –∏ Vercel  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —á–∞—Ç** - –ø–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É –∞–¥–º–∏–Ω–∞** - —Ñ–æ—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ  

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **CameraCapture.tsx** - –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ —Ñ–æ—Ç–æ
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–º–µ—Ä—É —á–µ—Ä–µ–∑ MediaDevices API
   - Preview —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–Ω—è—Ç—å
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64 —Å –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π (JPEG, –∫–∞—á–µ—Å—Ç–≤–æ 0.8)

2. **HiddenChat.tsx** - —á–∞—Ç –∫–ª–∏–µ–Ω—Ç–∞
   - –ö–Ω–æ–ø–∫–∞ –∫–∞–º–µ—Ä—ã —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ

3. **ChatManager.tsx** - –∞–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å —á–∞—Ç–∞
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
   - –ö–ª–∏–∫ –ø–æ —Ñ–æ—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î:

- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `image_data TEXT` –≤ —Ç–∞–±–ª–∏—Ü—É `chat_messages`
- –ú–∏–≥—Ä–∞—Ü–∏—è: `supabase/migration-add-image-support.sql`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ Prisma —Å—Ö–µ–º–∞ –∏ TypeScript —Ç–∏–ø—ã

### API –∏–∑–º–µ–Ω–µ–Ω–∏—è:

- `/api/chat` POST - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ `image_data`
- GET –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `image_data` –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î. –î–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

```bash
npx tsx scripts/apply-image-migration.ts
```

## üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–∞:
1. –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –≤–æ–ø—Ä–æ—Å–µ)
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –∫–∞–º–µ—Ä—ã (üì∑)
3. –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
4. –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å preview –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ—Å–Ω—è—Ç—å

### –î–ª—è –∞–¥–º–∏–Ω–∞:
1. –§–æ—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç–µ —Å –ø–æ–º–µ—Ç–∫–æ–π –æ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
2. –ö–ª–∏–∫ –ø–æ —Ñ–æ—Ç–æ - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ
3. –ú–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å (–ü–ö–ú ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫** - —á–∏—Å—Ç–∞—è —Ä–∞–±–æ—Ç–∞ —Å MediaDevices API
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞** - JPEG –∫–æ–º–ø—Ä–µ—Å—Å–∏—è 80%
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ useCallback –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞–º–µ—Ä—ã
- **Graceful degradation** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `lucide-react` - –∏–∫–æ–Ω–∫–∏ (Camera, X, Image)
- Radix UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Dialog)

## ‚úÖ –°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏

- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
- ‚úÖ Next.js build —É—Å–ø–µ—à–µ–Ω
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ª–∏–Ω—Ç –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é
